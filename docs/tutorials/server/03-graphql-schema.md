# ุงูุฏุฑุณ ุงูุซุงูุซ: ูุฎุทุท GraphQL โ ุนูุฏ ุงูุงุชูุงู ุจูู ุงูุนููู ูุงูุฎุงุฏู ๐

> **ูุฏู ุงูุฏุฑุณ:** ููู ููู ููุนุฑููู ูุฎุทุท GraphQL ููุง ูู ุฏูุฑู ูู ุงูุชุทุจูู

---

## 1. ูุง ุงููุฑู ุจูู REST ู GraphQLุ

### REST ุงูุชูููุฏู:
```
GET  /api/posts        โ ูู ุงูููุดูุฑุงุช
GET  /api/posts/1      โ ููุดูุฑ ูุงุญุฏ
POST /api/posts        โ ุฅูุดุงุก ููุดูุฑ
PUT  /api/posts/1      โ ุชุนุฏูู ููุดูุฑ
DELETE /api/posts/1    โ ุญุฐู ููุดูุฑ
```
ููู ุนูููุฉ **ูุณุงุฑ ูุฎุชูู** ูู ุงูุฑุงุจุท.

### GraphQL (ูุฐุง ุงููุดุฑูุน):
```
POST /graphql   โ ูุณุงุฑ **ูุงุญุฏ** ููุท ููู ุดูุก!
```

ูู GraphQLุ ุจุฏูุงู ูู ุชุบููุฑ ุงููุณุงุฑุ ูุบููุฑ **ูุต ุงูุงุณุชุนูุงู**:
```graphql
# ุงูุฑุฃ
query { events { title price } }

# ุฃูุดุฆ  
mutation { createEvent(eventInput: {...}) { _id title } }

# ุงุดุชุฑู ููุชุญุฏูุซุงุช ุงูููุฑูุฉ
subscription { eventAdded { title } }
```

---

## 2. ูุง ูู ุงููุฎุทุท (Schema)ุ

ุงููุฎุทุท = **ุนูุฏ ุงูุงุชูุงู** ุจูู ุงูุนููู ูุงูุฎุงุฏู.

ูููู: "ูุฐู ุงูุฃููุงุน ุงูููุฌูุฏุฉุ ููุฐู ุงูุงุณุชุนูุงูุงุช ุงููุชุงุญุฉุ ููุฐู ุงูุจูุงูุงุช ุงูุชู ุณุชูุฑุณูู."

ุฅุฐุง ุทูุจ ุงูุนููู ุญููุงู ุบูุฑ ููุฌูุฏ ูู ุงููุฎุทุท โ **ุฎุทุฃ ููุฑู**. ูุง ููุงุฌุขุช!

---

## 3. ุงูุฃููุงุน ูู ุงููุฎุทุท (Types)

```graphql
type User {
  _id: ID!
  username: String!
  email: String!
  password: String!
}
```

| ุงูุฑูุฒ | ุงููุนูู |
|-------|--------|
| `String!` | ูุต ูุทููุจ (ูุง ููุจู null) |
| `String` | ูุต ุงุฎุชูุงุฑู (ูููู ุฃู ูููู null) |
| `Float!` | ุฑูู ุนุดุฑู ูุทููุจ |
| `ID!` | ูุนุฑูู ูุฑูุฏ ูุทููุจ |
| `Boolean!` | ุตุญ/ุฎุทุฃ ูุทููุจ |
| `[Event!]` | ูุงุฆูุฉ ูู Events |

---

## 4. ุงูุฃููุงุน ุงูููุฌูุฏุฉ ูู ูุฐุง ุงููุดุฑูุน

### `User` โ ุงููุณุชุฎุฏู
```graphql
type User {
  _id: ID!
  username: String!   # ุงุณู ุงููุณุชุฎุฏู
  email: String!      # ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
  password: String!   # ูููุฉ ุงููุฑูุฑ (ูุดูุฑุฉ)
}
```

### `AuthData` โ ุจูุงูุงุช ุงููุตุงุฏูุฉ
```graphql
type AuthData {
  userId: ID!      # ูุนุฑูู ุงููุณุชุฎุฏู
  token: String!   # JWT Token
  username: String!
}
```
ูุฐุง ูุง ููุฑุฌูุน ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู ุฃู ุฅูุดุงุก ุญุณุงุจ.

### `Event` โ ุงูููุงุณุจุฉ
```graphql
type Event {
  _id: ID!
  title: String!
  description: String!
  price: Float!
  date: String!
  creator: User!   # ูุฑุชุจุท ุจูุณุชุฎุฏู!
}
```
ูุงุญุธ ุฃู `creator` ููุนู `User` โ ูุนูู GraphQL ูุญู ุงูุงุฑุชุจุงุทุงุช ุชููุงุฆูุงู!

### `Booking` โ ุงูุญุฌุฒ
```graphql
type Booking {
  _id: ID!
  event: Event!      # ุงูููุงุณุจุฉ ุงููุญุฌูุฒุฉ
  user: User!        # ูู ุญุฌุฒ
  createdAt: String!
  updatedAt: String!
}
```

---

## 5. ุงูููุฏุฎูุงุช (Inputs)

ุนูุฏ ุฅุฑุณุงู ุจูุงูุงุช ุฅูู ุงูุฎุงุฏูุ ูุณุชุฎุฏู `input` ุจุฏูุงู ูู `type`:

```graphql
input EventInput {
  title: String!
  description: String!
  price: Float!
  date: String!
}
```

**ููุงุฐุง ููุตู ุจูู `type` ู `input`ุ**
- `type` โ ุงูุจูุงูุงุช ุงูุชู ููุฑุณููุง ุงูุฎุงุฏู **ููุนููู**
- `input` โ ุงูุจูุงูุงุช ุงูุชู ููุฑุณููุง ุงูุนููู **ููุฎุงุฏู**

---

## 6. ุงูุงุณุชุนูุงูุงุช (Queries) โ ุงููุฑุงุกุฉ

```graphql
type Query {
  events(searchTerm: String, skip: Int = 0, limit: Int = 8): [Event!]
  bookings: [Booking!]
  getUserEvents(userId: ID!): [Event]
}
```

| ุงูุงุณุชุนูุงู | ูุงุฐุง ููุนู | ููู ูุณุชุทูุนุ |
|-----------|-----------|----------|
| `events` | ูุงุฆูุฉ ุงูููุงุณุจุงุช ูุน pagination ูุจุญุซ | ุงูุฌููุน |
| `bookings` | ุญุฌูุฒุงุช ุงููุณุชุฎุฏู ุงูุญุงูู | ูุณุฌูู ุงูุฏุฎูู ููุท |
| `getUserEvents` | ููุงุณุจุงุช ูุณุชุฎุฏู ูุนูู | ุงูุฌููุน |

**ุงููุนุงููุงุช:**
- `searchTerm: String` โ ุงุฎุชูุงุฑูุ ููุจุญุซ ูู ุงูุนููุงู/ุงููุตู
- `skip: Int = 0` โ ุชุฎุทู ุนุฏุฏ ูู ุงููุชุงุฆุฌ (ููู pagination)
- `limit: Int = 8` โ ุงูุญุฏ ุงูุฃูุตู ูููุชุงุฆุฌ ูู ุงูุตูุญุฉ

---

## 7. ุงูุทูุฑุงุช (Mutations) โ ุงููุชุงุจุฉ

```graphql
type Mutation {
  # ุงููุตุงุฏูุฉ
  createUser(userInput: UserInput!): AuthData
  login(email: String!, password: String!): AuthData
  updateUser(updateUserInput: UpdateUserInput!): User
  deleteUser: Boolean

  # ุงูููุงุณุจุงุช
  createEvent(eventInput: EventInput!): Event
  updateEvent(eventId: ID!, eventInput: UpdateEventInput!): Event
  deleteEvent(eventId: ID!): [Event]

  # ุงูุญุฌูุฒุงุช
  bookEvent(eventId: ID!): Booking
  cancelBooking(bookingId: ID!): Event
}
```

---

## 8. ุงูุงุดุชุฑุงูุงุช (Subscriptions) โ ุงูุชุญุฏูุซ ุงูููุฑู โก

```graphql
type Subscription {
  eventAdded: Event!
  bookingAdded: Booking!
}
```

ูุฐู ุงูููุฒุฉ ูุฑูุฏุฉ ูู ูุฐุง ุงููุดุฑูุน! ุชุนูู ุนุจุฑ **WebSocket**:
```
ุงูุนููู ูููู: "ุฃุฎุจุฑูู ุนูุฏูุง ุชูุถุงู ููุงุณุจุฉ ุฌุฏูุฏุฉ"
ุงูุฎุงุฏู: "ุชูุงูุ ุณุฃุฑุณู ูู ุชููุงุฆูุงู ุนูุฏ ุงูุฅุถุงูุฉ"
```

---

## 9. ููู ูุชุญูู ุงููุฎุทุท ุฅูู ููุฏุ

```typescript
// ูู ููู schema/index.ts
import gql from "graphql-tag";

export const typeDefs = gql`
  type User { ... }
  type Event { ... }
  type Query { ... }
  type Mutation { ... }
  type Subscription { ... }
`;
```

ุซู ูู `index.ts`:
```typescript
const schema = makeExecutableSchema({
  typeDefs,
  resolvers: combinedResolvers,
});
```

`typeDefs` = ุงููุฎุทุท (ุงููุธุฑูุฉ)  
`resolvers` = ุงูููุฏ ุงููุนูู ุงูุฐู ููููุฐ ูู ุนูููุฉ

---

## 10. ุฎูุงุตุฉ

```
ุงููุฎุทุท (typeDefs) = ุฏุณุชูุฑ ุงูุชุทุจูู
    ูุญุฏุฏ:
    โโโ ุงูุฃููุงุน: ูุง ูู ุงูุจูุงูุงุชุ
    โโโ Queries: ูุง ุงูุฐู ูููู ูุฑุงุกุชูุ
    โโโ Mutations: ูุง ุงูุฐู ูููู ุชุบููุฑูุ
    โโโ Subscriptions: ูุง ุงูุฐู ูููู ุงูุงุณุชูุงุน ุฅูููุ
```

- **ุงูู Schema** ูููุน ุงูุฃุฎุทุงุก ูุจูุฑุงู โ ุฅุฐุง ุทูุจุช ุญููุงู ุบูุฑ ููุฌูุฏุ GraphQL ูุฑูุถ ุงูุทูุจ
- **ุงูู Types** ุชุถูู ุฃู ุงูุจูุงูุงุช ุงูููุฑุณูุฉ ูุงูููุณุชูุจูุฉ ุตุญูุญุฉ
- **ุงูู Subscriptions** ุชุถูู Real-time ุฏูู ุงูุญุงุฌุฉ ูู polling (ุณุคุงู ูุชูุฑุฑ)
